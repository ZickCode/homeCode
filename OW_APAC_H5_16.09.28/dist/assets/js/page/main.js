"use strict";$(function(){var e="";e="http://cimg.178.com/swxf/APAC/assets/";var t=navigator.userAgent,n=t.match(/(iPad).*OS\s([\d_]+)/),i=!n&&t.match(/(iPhone\sOS)\s([\d_]+)/),a=t.match(/(Android)\s+([\d.]+)/),o=i||a,r={init:function(){var e=this;e.preload()},render:function(){var e,t=this,n=(document.documentElement,document.querySelector('meta[name="viewport"]')),i=(document.createElement("style"),1),a=window.screen.width;window.screen.height;i=parseInt(a)/750,/Android (\d+\.\d+)/.test(navigator.userAgent)?(e=parseFloat(RegExp.$1),e>2.3?n.setAttribute("content","width=750,minimum-scale="+i+",maximum-scale="+i+",target-densitydpi=device-dpi"):n.setAttribute("content","width=750,target-densitydpi=device-dpi")):n.setAttribute("content","width=750,user-scalable=no,target-densitydpi=device-dpi"),$.ajax({url:"http://ow.766.com/db/other/activity/owApacChineH5",type:"get",dataType:"jsonp",jsonp:"callback",data:{},success:function(e){if(1==e.code){var t=e.result.china,n=e.result.world,i=t+n;t=parseInt(t/i*100),n=parseInt(n/i*100),$(".process-left").width(t+"%"),$(".process-right").width(n+"%"),$(".icon-line").css("left",t+"%")}}}),t.initSwiper()},bindEvent:function(){$(".vote-btns").find(".btn").on("click",function(){var e,t=$(this).attr("data-info"),n=$(this).parent().attr("data-flag");e="left"==t?"world":"china",1==n?($.ajax({url:"http://ow.766.com/db/other/activity/owApacChineH5",type:"get",dataType:"jsonp",jsonp:"callback",data:{voteType:e},success:function(e){1==e.code&&void 0}}),$(this).parent().attr("data-flag","0"),$(this).parent().find(".btn").css({"border-color":"#424242",color:"#424242"})):void 0})},initSwiper:function(){new Swiper(".J-swiper-container",{direction:"vertical",mousewheelControl:!0,initialSlide:0,onInit:function(e){swiperAnimateCache(e),swiperAnimate(e)},onSlideChangeEnd:function(e){swiperAnimate(e)}}),new Swiper(".J-map-swiper",{spaceBetween:8,nextButton:".map-swiper-next",prevButton:".map-swiper-prev"}),new Swiper(".J-hero-swiper",{spaceBetween:8,nextButton:".hero-swiper-next",prevButton:".hero-swiper-prev"}),new Swiper(".J-famous-player",{loop:!0,pagination:".swiper-pagination",prevButton:".famous-player-prev",nextButton:".famous-player-next",effect:"coverflow",initialSlide:0,slidesPerView:3,centeredSlides:!0,coverflow:{rotate:0,stretch:10,depth:100,modifier:1,slideShadows:!0}}),new Swiper(".J-china-final-map",{spaceBetween:8,pagination:".china-final-map-pagination",nextButton:".china-final-map-next",prevButton:".china-final-map-prev"}),new Swiper(".J-china-final-hero",{spaceBetween:8,nextButton:".china-final-hero-next",prevButton:".china-final-hero-prev"})},preload:function(){function t(){}function n(e){}function i(e){a=parseInt(100*e.progress),100==a&&(o||pageResponse({selectors:".wrap",mode:"contain",width:"750",height:"1337"}),r.render(),r.bindEvent())}var a,r=this,s=new createjs.LoadQueue((!0));s.on("fileload",t,r),s.on("complete",n,r),s.on("progress",i,r),s.loadFile(e+"images/back.jpg"),s.loadFile(e+"images/back-index.jpg"),s.loadFile(e+"images/part-team-img.png"),s.loadFile(e+"images/process_line.png"),s.loadFile(e+"images/sprite.png")}};r.init()});